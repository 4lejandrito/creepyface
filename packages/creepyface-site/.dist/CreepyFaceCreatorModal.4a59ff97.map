{"version":3,"sources":["components/CreepyFaceOptions.tsx","tips.ts","../../../node_modules/react-modal/node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../node_modules/react-modal/node_modules/prop-types/factoryWithThrowingShims.js","../../../node_modules/react-modal/node_modules/prop-types/index.js","../../../node_modules/react-modal/lib/helpers/tabbable.js","../../../node_modules/react-modal/lib/helpers/focusManager.js","../../../node_modules/react-modal/lib/helpers/scopeTab.js","../../../node_modules/react-modal/node_modules/warning/browser.js","../../../node_modules/exenv/index.js","../../../node_modules/react-modal/lib/helpers/safeHTMLElement.js","../../../node_modules/react-modal/lib/helpers/ariaAppHider.js","../../../node_modules/react-modal/lib/helpers/classList.js","../../../node_modules/react-modal/lib/components/ModalPortal.js","../../../node_modules/react-modal/lib/components/Modal.js","../../../node_modules/react-modal/lib/index.js","components/Modal.tsx","components/Upload.tsx","../../../node_modules/stop-media-stream/index.js","../../../node_modules/dataurl-to-blob/index.js","../../../node_modules/webrtc-adapter/src/js/utils.js","../../../node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","../../../node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","../../../node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","../../../node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","../../../node_modules/rtcpeerconnection-shim/node_modules/sdp/sdp.js","../../../node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","../../../node_modules/webrtc-adapter/src/js/edge/getusermedia.js","../../../node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","../../../node_modules/webrtc-adapter/src/js/edge/edge_shim.js","../../../node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","../../../node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","../../../node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","../../../node_modules/webrtc-adapter/src/js/safari/safari_shim.js","../../../node_modules/sdp/sdp.js","../../../node_modules/webrtc-adapter/src/js/common_shim.js","../../../node_modules/webrtc-adapter/src/js/adapter_factory.js","../../../node_modules/webrtc-adapter/src/js/adapter_core.js","../../../node_modules/bowser/es5.js","components/Video.tsx","components/CreepyFaceCreatorModal.tsx"],"names":["REACT_ELEMENT_TYPE","isValidElement","throwOnDirectAccess","module","exports","require","warning","Object","defineProperty","value","dumpClassLists","htmlClassList","docBodyClassList","incrementReference","poll","className","decrementReference","trackClass","classListRef","classes","forEach","add","untrackClass","remove","element","classString","classList","nodeName","toLowerCase","split","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_typeof","Symbol","iterator","obj","constructor","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_propTypes","_propTypes2","_focusManager","focusManager","_interopRequireWildcard","_scopeTab","_scopeTab2","_ariaAppHider","ariaAppHider","_classList","_safeHTMLElement","_safeHTMLElement2","__esModule","newObj","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","CLASS_NAMES","overlay","content","TAB_KEY","ESC_KEY","ariaHiddenInstances","ModalPortal","_Component","_this","getPrototypeOf","setOverlayRef","overlayRef","setContentRef","contentRef","afterClose","_this$props","appElement","ariaHideApp","htmlOpenClassName","bodyOpenClassName","document","body","getElementsByTagName","show","shouldFocusAfterRender","shouldReturnFocusAfterClose","returnFocus","teardownScopedFocus","popWithoutFocus","open","beforeOpen","state","afterOpen","beforeClose","clearTimeout","closeTimer","setState","setupScopedFocus","node","markForFocusLater","isOpen","onAfterOpen","close","closeTimeoutMS","closeWithTimeout","closeWithoutTimeout","focusContent","contentHasFocus","focus","closesAt","Date","now","setTimeout","handleKeyDown","event","keyCode","shouldCloseOnEsc","stopPropagation","requestClose","handleOverlayOnClick","shouldClose","shouldCloseOnOverlayClick","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","preventDefault","handleContentOnClick","handleContentOnMouseDown","onRequestClose","shouldBeClosed","activeElement","contains","buildClassName","which","additional","classNames","base","attributesFromObject","prefix","items","keys","reduce","acc","name","moveFromContentToOverlay","Component","prevProps","prevState","_props","hide","_props2","overlayClassName","defaultStyles","contentStyles","overlayStyles","createElement","ref","style","onClick","onMouseDown","tabIndex","onKeyDown","onMouseUp","role","contentLabel","aria","data","children","defaultProps","propTypes","bool","isRequired","shape","object","oneOfType","string","instanceOf","func","number","testId","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","parseInt","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","wrappedCallback","e","modifiedEvent","_eventMap","nativeRemoveEventListener","removeEventListener","unwrappedCb","get","set","disableLog","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","detectBrowser","navigator","result","browser","version","mozGetUserMedia","userAgent","webkitGetUserMedia","mediaDevices","logging","utils","shimGetUserMedia","browserDetails","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","undefined","exact","min","max","oldname_","charAt","toUpperCase","slice","oc","push","mix","advanced","concat","shimConstraints_","constraints","JSON","parse","stringify","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","matches","getSupportedConstraints","enumerateDevices","then","devices","dev","filter","d","kind","find","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","getUserMedia","onSuccess","onError","bind","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","track","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","error","walkStats","stats","resultSet","has","id","endsWith","filterStats","outbound","streamStatsType","filteredResult","Map","trackStats","type","trackIdentifier","trackStat","trackId","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","transceiver","receiver","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","getReceivers","Event","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimSenderReceiverGetStats","RTCRtpReceiver","getStats","origGetReceivers","receivers","srcElement","origGetStats","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","map","streamId","alreadyExists","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","signalingState","t","oldStream","resolve","method","nativeMethod","args","isLegacyCall","description","desc","replaceInternalStreamId","origSetLocalDescription","setLocalDescription","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","webkitRTCPeerConnection","selector","successCallback","errorCallback","fixChromeStats_","response","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","RTCIceCandidate","nativeAddIceCandidate","addIceCandidate","fixNegotiationNeeded","filterIceServers","iceServers","edgeVersion","hasTurn","server","urls","url","isString","validTurn","startsWith","SDPUtils","fixStatsType","inboundrtp","outboundrtp","candidatepair","writeMediaSection","caps","dtlsRole","writeRtpDescription","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","_initialTrackId","msid","sendEncodingParameters","ssrc","rtx","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","Math","rtcpFeedback","fb","j","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","offer","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","code","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","fireAddTrack","trackEvent","_dispatchEvent","config","_eventTarget","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","enabled","_createIceGatherer","sdpMLineIndex","shift","bufferedCandidateEvents","bufferCandidates","end","_gather","onlocalcandidate","evt","sdpMid","cand","component","ufrag","usernameFragment","serializedCandidate","writeCandidate","parseCandidate","toJSON","sections","getMediaSections","getDescription","join","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","send","recv","params","encodings","rtcp","cname","compound","rtcpParameters","p","receive","sessionpart","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","isRejected","rejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","start","_updateSignalingState","receiverList","iceOptions","substr","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","getCapabilities","codec","isNewTrack","nativeTrack","sid","item","newState","states","closed","checking","connected","completed","disconnected","failed","new","connecting","createOffer","numAudioTracks","numVideoTracks","offerOptions","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","rHdrExt","getLocalCandidates","createAnswer","mediaSectionsInOffer","localTrack","reducedSize","candidateString","trim","senderOrReceiver","promises","all","allStats","results","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","catch","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","onSucc","onErr","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimLocalStreamsAPI","_localStreams","_addTrack","index","tracks","shimRemoteStreamsAPI","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","failureCallback","options","promise","withCallback","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","shimTrackEventTransceiver","RTCTransceiver","shimCreateOfferLegacy","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","shimMaxMessageSize","RTCSctpTransport","_sctp","sctpInDescription","mLine","parseMLine","isFirefox","maxMessageSize","getRemoteFirefoxVersion","canSendMMS","remoteIsFirefox","canSendMaxMessageSize","remoteMMS","getMaxMessageSize","Number","POSITIVE_INFINITY","sctp","shimSendThrowTypeError","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","size","byteLength","readyState","shimConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","adapterFactory","shimChrome","shimFirefox","shimEdge","shimSafari","adapter","commonShim","chromeShim","browserShim","firefoxShim","edgeShim","safariShim"],"mappings":"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","file":"CreepyFaceCreatorModal.4a59ff97.map","sourceRoot":"../frontend","sourcesContent":["import React from 'react'\nimport { ImageIcon } from './Icon'\nimport classNames from 'classnames'\nimport { getAngles } from '../get-next'\nimport { Picture, Pictures } from '../redux/types'\n\nfunction Preview({\n  pictureKey,\n  picture,\n  active\n}: {\n  pictureKey: keyof Pictures\n  picture: Picture | undefined\n  active: boolean\n}) {\n  return (\n    <li\n      className={classNames({ active })}\n      style={{\n        backgroundImage: picture && `url(${picture.src})`\n      }}\n    >\n      <span className=\"image-icon\">\n        <span className=\"icon-wrapper\">\n          <ImageIcon next={pictureKey} />\n        </span>\n      </span>\n    </li>\n  )\n}\n\nexport default function CreepyFaceOptions({\n  pictures,\n  next\n}: {\n  pictures: Partial<Pictures>\n  next: keyof Pictures | undefined\n}) {\n  return (\n    <div id=\"options\">\n      <ul className=\"thumbnails\">\n        <Preview\n          pictureKey=\"serious\"\n          active={next === 'serious'}\n          picture={pictures['serious']}\n        />\n        <Preview\n          pictureKey=\"hover\"\n          active={next === 'hover'}\n          picture={pictures['hover']}\n        />\n        {getAngles().map(angle => (\n          <Preview\n            key={angle}\n            pictureKey={angle}\n            active={next === angle}\n            picture={pictures[angle]}\n          />\n        ))}\n      </ul>\n    </div>\n  )\n}\n","type Tips = {\n  serious: 'with a happy face'\n  hover: 'with a funny face'\n  [0]: 'up'\n  [45]: 'up right'\n  [90]: 'right'\n  [135]: 'down right'\n  [180]: 'down'\n  [225]: 'down left'\n  [270]: 'left'\n  [315]: 'up left'\n}\n\nconst tips: Tips = {\n  serious: 'with a happy face',\n  hover: 'with a funny face',\n  [0]: 'up',\n  [45]: 'up right',\n  [90]: 'right',\n  [135]: 'down right',\n  [180]: 'down',\n  [225]: 'down left',\n  [270]: 'left',\n  [315]: 'up left'\n}\n\nexport default tips\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object/;\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  // Otherwise we need to check some styles\n  var style = window.getComputedStyle(element);\n  return zeroSize ? style.getPropertyValue(\"overflow\") !== \"visible\" : style.getPropertyValue(\"display\") == \"none\";\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) break;\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  return [].slice.call(element.querySelectorAll(\"*\"), 0).filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus();\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === document.activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  var target;\n  if (tail === document.activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === document.activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(document.activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  event.preventDefault();\n\n  tabbable[x].focus();\n}\nmodule.exports = exports[\"default\"];","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\nexports.resetForTesting = resetForTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = \"length\" in el ? el[0] : el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  if (!appElement && !globalElement) {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction hide(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).setAttribute(\"aria-hidden\", \"true\");\n  }\n}\n\nfunction show(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).removeAttribute(\"aria-hidden\");\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}\n\nfunction resetForTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dumpClassLists = dumpClassLists;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\nfunction dumpClassLists() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n\";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n\";\n    }\n\n    classes = document.body.className;\n\n    // eslint-disable-next-line max-len\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n\";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n\";\n    }\n\n    buffer += \"\\n\";\n\n    // eslint-disable-next-line no-console\n    console.log(buffer);\n  }\n}\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName;\n\n      // Remove classes.\n\n      classList.remove(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus();\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.setState({ afterOpen: true });\n\n          if (_this.props.isOpen && _this.props.onAfterOpen) {\n            _this.props.onAfterOpen();\n          }\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus();\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.afterClose();\n      clearTimeout(this.closeTimer);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName;\n\n      // Add classes.\n\n      classList.add(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      return this.shouldBeClosed() ? null : _react2.default.createElement(\n        \"div\",\n        {\n          ref: this.setOverlayRef,\n          className: this.buildClassName(\"overlay\", overlayClassName),\n          style: _extends({}, overlayStyles, this.props.style.overlay),\n          onClick: this.handleOverlayOnClick,\n          onMouseDown: this.handleOverlayOnMouseDown,\n          \"aria-modal\": \"true\"\n        },\n        _react2.default.createElement(\n          \"div\",\n          _extends({\n            ref: this.setContentRef,\n            style: _extends({}, contentStyles, this.props.style.content),\n            className: this.buildClassName(\"content\", className),\n            tabIndex: \"-1\",\n            onKeyDown: this.handleKeyDown,\n            onMouseDown: this.handleContentOnMouseDown,\n            onMouseUp: this.handleContentOnMouseUp,\n            onClick: this.handleContentOnClick,\n            role: this.props.role,\n            \"aria-label\": this.props.contentLabel\n          }, this.attributesFromObject(\"aria\", this.props.aria || {}), this.attributesFromObject(\"data\", this.props.data || {})),\n          this.props.children\n        )\n      );\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _reactDom2.default.createPortal !== undefined;\nvar createPortal = isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      parent.removeChild(_this.node);\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  parentSelector: function parentSelector() {\n    return document.body;\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","import React, { ReactNode } from 'react'\nimport Icon from './Icon'\nimport Button from './Button'\nimport ReactModal from 'react-modal'\n\nReactModal.setAppElement('#root')\n\nexport default function Modal({\n  children,\n  id,\n  isOpen,\n  onOpen = () => {},\n  onClose,\n  title\n}: {\n  children: ReactNode | ReactNode[]\n  id: string\n  isOpen: boolean\n  onOpen?: () => void\n  onClose: () => void\n  title: string\n}) {\n  return (\n    <ReactModal\n      className={`light ${id}`}\n      isOpen={isOpen}\n      contentLabel={title}\n      onAfterOpen={onOpen}\n      onRequestClose={onClose}\n      shouldCloseOnOverlayClick={false}\n      closeTimeoutMS={200}\n    >\n      <Button className=\"cancel\" onClick={onClose}>\n        <Icon name=\"times\" />\n      </Button>\n      <main id={id}>{children}</main>\n    </ReactModal>\n  )\n}\n","import React from 'react'\nimport Link from './Link'\nimport Button from './Button'\nimport { useTranslate } from './Language'\nimport { useSelector, useDispatch } from './State'\nimport { upload, showPermissions } from '../redux/actions'\nimport Modal from './Modal'\n\nexport default function Upload() {\n  const downloadLink = useSelector(state => state.downloadLink)\n  const viewLink = useSelector(state => state.viewLink)\n  const uploading = useSelector(state => state.uploading)\n  const { download, research, samples, show } = useSelector(\n    state => state.permissions\n  )\n  const dispatch = useDispatch()\n  const translate = useTranslate()\n\n  return (\n    <div className=\"upload\">\n      <div>\n        <Button\n          icon=\"download\"\n          className=\"download\"\n          href={downloadLink}\n          loading={uploading}\n          download={!!downloadLink}\n          action={!downloadLink ? upload : undefined}\n        >\n          {translate(\n            downloadLink\n              ? 'Download again'\n              : samples\n              ? 'Download and publish'\n              : 'Download'\n          )}\n        </Button>\n        {viewLink && (\n          <Button\n            icon=\"twitter\"\n            href={`http://twitter.com/share?text=${translate(\n              'See my creepyface!'\n            )}&url=${viewLink}&hashtags=creepyface_io`}\n          >\n            {translate('Share on Twitter')}\n          </Button>\n        )}\n      </div>\n      {!downloadLink && (\n        <small>\n          {translate('By downloading your creepyface you accept')}{' '}\n          <Button type=\"link\" action={showPermissions}>\n            {translate('these conditions')}\n          </Button>\n          .\n          <Modal\n            id=\"permissions\"\n            isOpen={show}\n            title={'Permissions'}\n            onClose={() => dispatch(showPermissions())}\n          >\n            <p>\n              {translate(\n                'We will store your images for the following purposes'\n              )}\n              :\n            </p>\n            <fieldset>\n              <label>\n                <input\n                  disabled\n                  type=\"checkbox\"\n                  checked={download}\n                  onChange={() =>\n                    dispatch({ type: 'toggleDownloadPermission' })\n                  }\n                />\n                <strong>{translate('Generate the download link')}</strong>\n                <p>\n                  <small>\n                    {translate(\n                      'They will be permanently deleted at any time without further notice'\n                    )}\n                    .\n                  </small>\n                </p>\n              </label>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  autoFocus\n                  checked={research}\n                  onChange={() =>\n                    dispatch({ type: 'toggleResearchPermission' })\n                  }\n                />\n                <strong>{translate('Use them for research')}</strong>\n                <p>\n                  <small>\n                    {translate(\n                      'We want to train an AI that can generate a creepyface based on just 1 image. For this to happen we need as many images as possible so please tick this box if you find it interesting'\n                    )}\n                    .\n                  </small>\n                </p>\n              </label>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={samples}\n                  onChange={() => dispatch({ type: 'toggleSamplesPermission' })}\n                />\n                <strong>\n                  {translate('Publish them as samples in the front page')}\n                </strong>\n                <p>\n                  <small>\n                    {translate(\n                      'The images will be stored and publicly served as reduced size thumbnails. They may be permanently deleted at any time without further notice'\n                    )}\n                    .\n                  </small>\n                </p>\n              </label>\n            </fieldset>\n            <p>\n              <small>\n                {translate(\n                  'If at any time you change your mind and want your images to be permanently deleted please send us an email to'\n                )}{' '}\n                <Link href=\"mailto:privacy@creepyface.io\">\n                  privacy@creepyface.io\n                </Link>\n                .\n              </small>\n            </p>\n            <Button icon=\"accept\" action={showPermissions}>\n              {translate('Accept')}\n            </Button>\n          </Modal>\n        </small>\n      )}\n    </div>\n  )\n}\n","function stopMediaStream(mediaStream) {\n  if(!mediaStream) return\n\n  mediaStream.getTracks()\n    .forEach(stopAndRemoveTrack.bind(null, mediaStream))\n}\n\nfunction stopAndRemoveTrack(mediaStream, track) {\n  track.stop()\n  mediaStream.removeTrack(track)\n}\n\nmodule.exports = stopMediaStream\n","module.exports = function (dataURL) {\n\n    'use strict';\n\n    if (!window || window.window !== window) {\n        throw new Error('This module is only available in browser');\n    }\n\n    var Blob = window.Blob || window.MozBlob || window.WebKitBlob;\n    if (!Blob) {\n        throw new Error('Blob was not supported');\n    }\n\n    var dataURLPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/;\n\n    // parse the dataURL components as per RFC 2397\n    var matches = dataURL.match(dataURLPattern);\n    if (!matches) {\n        throw new Error('invalid dataURI');\n    }\n\n    // default to text/plain;charset=utf-8\n    var mediaType = matches[2]\n        ? matches[1]\n        : 'text/plain' + (matches[3] || ';charset=utf-8');\n\n    var isBase64   = !!matches[4];\n    var dataString = dataURL.slice(matches[0].length);\n    var byteString = isBase64\n        // convert base64 to raw binary data held in a string\n        ? atob(dataString)\n        // convert base64/URLEncoded data component to raw binary\n        : decodeURIComponent(dataString);\n\n    var array = [];\n    for (var i = 0; i < byteString.length; i++) {\n        array.push(byteString.charCodeAt(i));\n    }\n\n    return new Blob([new Uint8Array(array)], { type: mediaType });\n};\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  const {navigator} = window;\n\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(cs) {\n    return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n      if (c.audio && !stream.getAudioTracks().length ||\n          c.video && !stream.getVideoTracks().length) {\n        stream.getTracks().forEach(track => {\n          track.stop();\n        });\n        throw new DOMException('', 'NotFoundError');\n      }\n      return stream;\n    }, e => Promise.reject(shimError_(e))));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    return getSourceId(constraints)\n      .then(sourceId => {\n        const widthSpecified = constraints.video && constraints.video.width;\n        const heightSpecified = constraints.video && constraints.video.height;\n        const frameRateSpecified = constraints.video &&\n          constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n  };\n}\n","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = (e) => {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', te => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === te.track.id);\n            } else {\n              receiver = {track: te.track};\n            }\n\n            const event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(track => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === track.id);\n            } else {\n              receiver = {track};\n            }\n            const event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        let sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n        origRemoveTrack.apply(this, arguments);\n        const idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(track => {\n        const sender = this._senders.find(s => s.track === track);\n        if (sender) { // remove sender\n          this._senders.splice(this._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function() {\n        const receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(receiver => receiver._pc = this);\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams)\n      .map(streamId => this._shimmedLocalStreams[streamId][0]);\n  };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    const sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n        const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          this._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (this._shimmedLocalStreams[streamId].length === 1) {\n          delete this._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    const nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n    delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    const streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 ||\n        !streams[0].getTracks().find(t => t === track)) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException(\n        'The adapter.js addTrack polyfill only supports a single ' +\n        ' stream which is associated with the specified track.',\n        'NotSupportedError');\n    }\n\n    const alreadyExists = this.getSenders().find(s => s.track === track);\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    const oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(() => {\n        this.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      const newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(s => s.track === track);\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    window.RTCPeerConnection.prototype[method] = function() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    };\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    const isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    let stream;\n    Object.keys(this._streams).forEach(streamid => {\n      const hasTrack = this._streams[streamid].getTracks()\n        .find(track => sender.track === track);\n      if (hasTrack) {\n        stream = this._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nexport function shimPeerConnection(window) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(selector,\n      successCallback, errorCallback) {\n    const args = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof arguments[0] !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        args[1](makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        arguments[0]]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(successCallback, errorCallback);\n  };\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nexport function fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n}\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator.mediaDevices);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    if (!(constraints && constraints.video)) {\n      const err = new DOMException('getDisplayMedia without video ' +\n          'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = {mediaSource: preferredMediaSource};\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(\n    selector,\n    onSucc,\n    onErr\n  ) {\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(sender => {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        this.removeTrack(sender);\n      }\n    });\n  };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      stream.getTracks().forEach(track => _addTrack.call(this, track, stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n      return _addTrack.call(this, track, stream);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      const index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      const tracks = stream.getTracks();\n      this.getSenders().forEach(sender => {\n        if (tracks.includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      const pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function(e) {\n          e.streams.forEach(stream => {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const createOffer = prototype.createOffer;\n  const createAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      const newIceServers = [];\n      for (let i = 0; i < pcConfig.iceServers.length; i++) {\n        let server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') &&\n            server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n      // defined for some reason even when window.RTCTransceiver is not.\n      !window.RTCTransceiver) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      const audioTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'audio');\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true &&\n          !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      const videoTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'video');\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true &&\n          !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(msidParts) {\n    return msidParts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n    this._sctp = null;\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      let maxMessageSize;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      const sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function() {\n    const dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter = adapterFactory({window});\nexport default adapter;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bowser=t():e.bowser=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=70)}({18:function(e,t,r){var n,i,s;i=[e],void 0===(s=\"function\"==typeof(n=function(e){\"use strict\";var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return t(e,null,[{key:\"getFirstMatch\",value:function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||\"\"}},{key:\"getSecondMatch\",value:function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||\"\"}},{key:\"matchAndReturnConst\",value:function(e,t,r){if(e.test(t))return r}},{key:\"getWindowsVersionName\",value:function(e){switch(e){case\"NT\":return\"NT\";case\"XP\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.1\":return\"XP\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}}},{key:\"getVersionPrecision\",value:function(e){return e.split(\".\").length}},{key:\"compareVersions\",value:function(t,r){var n=Math.max(e.getVersionPrecision(t),e.getVersionPrecision(r)),i=e.map([t,r],function(t){var r=n-e.getVersionPrecision(t),i=t+new Array(r+1).join(\".0\");return e.map(i.split(\".\"),function(e){return new Array(20-e.length).join(\"0\")+e}).reverse()});for(n-=1;n>=0;){if(i[0][n]>i[1][n])return 1;if(i[0][n]!==i[1][n])return-1;if(0===n)return 0;n-=1}}},{key:\"map\",value:function(e,t){var r=[],n=void 0;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r}}]),e}();e.exports=r})?n.apply(t,i):n)||(e.exports=s)},65:function(e,t,r){var n,i,s;i=[t,r(18)],void 0===(s=\"function\"==typeof(n=function(t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=[{test:function(e){return\"microsoft edge\"===e.getBrowserName(!0)},describe:function(e){var t=(0,r.getFirstMatch)(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:\"EdgeHTML\",version:t}}},{test:[/trident/i],describe:function(e){var t={name:\"Trident\"},n=(0,r.getFirstMatch)(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:\"Presto\"},n=(0,r.getFirstMatch)(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:\"Gecko\"},n=(0,r.getFirstMatch)(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:function(){return{name:\"Blink\"}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:\"WebKit\"},n=(0,r.getFirstMatch)(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)},66:function(e,t,r){var n,i,s;i=[t,r(18)],void 0===(s=\"function\"==typeof(n=function(t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\"};t.default=[{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:function(){return{type:n.tablet,vendor:\"Nexus\"}}},{test:[/ipad/i],describe:function(){return{type:n.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/kftt build/i],describe:function(){return{type:n.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"}}},{test:[/silk/i],describe:function(){return{type:n.tablet,vendor:\"Amazon\"}}},{test:[/tablet/i],describe:function(){return{type:n.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=(0,r.getFirstMatch)(/(ipod|iphone)/i,e);return{type:n.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:n.mobile,vendor:\"Nexus\"}}},{test:[/[^-]mobi/i],describe:function(){return{type:n.mobile}}},{test:function(e){return\"blackberry\"===e.getBrowserName(!0)},describe:function(){return{type:n.mobile,vendor:\"BlackBerry\"}}},{test:function(e){return\"bada\"===e.getBrowserName(!0)},describe:function(){return{type:n.mobile}}},{test:function(e){return\"windows phone\"===e.getBrowserName()},describe:function(){return{type:n.mobile,vendor:\"Microsoft\"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:function(){return{type:n.tablet}}},{test:function(e){return\"android\"===e.getOSName(!0)},describe:function(){return{type:n.mobile}}},{test:function(e){return\"macos\"===e.getOSName(!0)},describe:function(){return{type:n.desktop,vendor:\"Apple\"}}},{test:function(e){return\"windows\"===e.getOSName(!0)},describe:function(){return{type:n.desktop}}},{test:function(e){return\"linux\"===e.getOSName(!0)},describe:function(){return{type:n.desktop}}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)},67:function(e,t,r){var n,i,s;i=[t,r(18)],void 0===(s=\"function\"==typeof(n=function(t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=[{test:[/windows phone/i],describe:function(e){var t=(0,r.getFirstMatch)(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:\"Windows Phone\",version:t}}},{test:[/windows/i],describe:function(e){var t=(0,r.getFirstMatch)(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),n=(0,r.getWindowsVersionName)(t);return{name:\"Windows\",version:t,versionName:n}}},{test:[/macintosh/i],describe:function(e){var t=(0,r.getFirstMatch)(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\");return{name:\"macOS\",version:t}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=(0,r.getFirstMatch)(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:\"iOS\",version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=(0,r.getFirstMatch)(/android[\\s/-](\\d+(\\.\\d+)*)/i,e);return{name:\"Android\",version:t}}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=(0,r.getFirstMatch)(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),n={name:\"WebOS\"};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t=(0,r.getFirstMatch)(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||(0,r.getFirstMatch)(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||(0,r.getFirstMatch)(/\\bbb(\\d+)/i,e);return{name:\"BlackBerry\",version:t}}},{test:[/bada/i],describe:function(e){var t=(0,r.getFirstMatch)(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:\"Bada\",version:t}}},{test:[/tizen/i],describe:function(e){var t=(0,r.getFirstMatch)(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:\"Tizen\",version:t}}},{test:[/linux/i],describe:function(){return{name:\"Linux\"}}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)},68:function(e,t,r){var n,i,s;i=[t,r(18)],void 0===(s=\"function\"==typeof(n=function(t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=/version\\/(\\d+(\\.?_?\\d+)+)/i,i=[{test:[/opera/i],describe:function(e){var t={name:\"Opera\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr|opios/i],describe:function(e){var t={name:\"Opera\"},i=(0,r.getFirstMatch)(/(?:opr|opios)[\\s/](\\S+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:\"Samsung Internet for Android\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe:function(e){var t={name:\"NAVER Whale Browser\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:\"MZ Browser\"},i=(0,r.getFirstMatch)(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/focus/i],describe:function(e){var t={name:\"Focus\"},i=(0,r.getFirstMatch)(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/coast/i],describe:function(e){var t={name:\"Opera Coast\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe:function(e){var t={name:\"Yandex Browser\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:\"UC Browser\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/mxios/i],describe:function(e){var t={name:\"Maxthon\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe:function(e){var t={name:\"Epiphany\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe:function(e){var t={name:\"Puffin\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe:function(e){var t={name:\"Sleipnir\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe:function(e){var t={name:\"K-Meleon\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe:function(e){var t={name:\"Internet Explorer\"},n=(0,r.getFirstMatch)(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:\"Microsoft Edge\"},n=(0,r.getSecondMatch)(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:\"Vivaldi\"},n=(0,r.getFirstMatch)(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:\"SeaMonkey\"},n=(0,r.getFirstMatch)(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:\"Sailfish\"},n=(0,r.getFirstMatch)(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:\"Amazon Silk\"},n=(0,r.getFirstMatch)(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:\"PhantomJS\"},n=(0,r.getFirstMatch)(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:\"SlimerJS\"},n=(0,r.getFirstMatch)(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t={name:\"BlackBerry\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:\"WebOS Browser\"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe:function(e){var t={name:\"Bada\"},n=(0,r.getFirstMatch)(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:\"Tizen\"},i=(0,r.getFirstMatch)(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe:function(e){var t={name:\"QupZilla\"},i=(0,r.getFirstMatch)(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:\"Firefox\"},n=(0,r.getFirstMatch)(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:\"Chromium\"},i=(0,r.getFirstMatch)(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:\"Chrome\"},n=(0,r.getFirstMatch)(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:\"Android Browser\"},i=(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:\"Safari\"},i=(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/googlebot/i],describe:function(e){var t={name:\"Googlebot\"},i=(0,r.getFirstMatch)(/googlebot\\/(\\d+(\\.\\d+))/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/.*/i],describe:function(e){return{name:(0,r.getFirstMatch)(/^(.*)\\/(.*) /,e),version:(0,r.getSecondMatch)(/^(.*)\\/(.*) /,e)}}}];t.default=i,e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)},69:function(e,t,r){var n,i,s;i=[t,r(68),r(67),r(66),r(65),r(18)],void 0===(s=\"function\"==typeof(n=function(t,r,n,i,s,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=f(r),u=f(n),c=f(i),d=f(s);function f(e){return e&&e.__esModule?e:{default:e}}var l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),void 0===t||null===t||\"\"===t)throw new Error(\"UserAgent parameter can't be empty\");this._ua=t,this.parsedResult={},!0!==r&&this.parse()}return v(e,[{key:\"getUA\",value:function(){return this._ua}},{key:\"test\",value:function(e){return e.test(this._ua)}},{key:\"parseBrowser\",value:function(){var e=this;this.parsedResult.browser={};var t=a.default.find(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error(\"Browser's test function is not valid\")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}},{key:\"getBrowser\",value:function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}},{key:\"getBrowserName\",value:function(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"}},{key:\"getBrowserVersion\",value:function(){return this.getBrowser().version}},{key:\"getOS\",value:function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}},{key:\"parseOS\",value:function(){var e=this;this.parsedResult.os={};var t=u.default.find(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error(\"Browser's test function is not valid\")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}},{key:\"getOSName\",value:function(e){var t=this.getOS(),r=t.name;return e?String(r).toLowerCase()||\"\":r||\"\"}},{key:\"getOSVersion\",value:function(){return this.getOS().version}},{key:\"getPlatform\",value:function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}},{key:\"getPlatformType\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPlatform(),r=t.type;return e?String(r).toLowerCase()||\"\":r||\"\"}},{key:\"parsePlatform\",value:function(){var e=this;this.parsedResult.platform={};var t=c.default.find(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error(\"Browser's test function is not valid\")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}},{key:\"getEngine\",value:function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}},{key:\"parseEngine\",value:function(){var e=this;this.parsedResult.engine={};var t=d.default.find(function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error(\"Browser's test function is not valid\")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}},{key:\"parse\",value:function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}},{key:\"getResult\",value:function(){return this.parsedResult}},{key:\"satisfies\",value:function(e){var t=this,r={},n=0,i={},s=0,o=Object.keys(e);if(o.forEach(function(t){var o=e[t];\"string\"==typeof o?(i[t]=o,s+=1):\"object\"===(void 0===o?\"undefined\":l(o))&&(r[t]=o,n+=1)}),n>0){var a=Object.keys(r),u=a.find(function(e){return t.isOS(e)});if(u){var c=this.satisfies(r[u]);if(void 0!==c)return c}var d=a.find(function(e){return t.isPlatform(e)});if(d){var f=this.satisfies(r[d]);if(void 0!==f)return f}}if(s>0){var v=Object.keys(i),p=v.find(function(e){return t.isBrowser(e)});if(void 0!==p)return this.compareVersion(i[p])}}},{key:\"isBrowser\",value:function(e){return this.getBrowserName(!0)===String(e).toLowerCase()}},{key:\"compareVersion\",value:function(e){var t=0,r=e;return\">\"===e[0]?(t=1,r=e.substr(1)):\"<\"===e[0]?(t=-1,r=e.substr(1)):\"=\"===e[0]&&(r=e.substr(1)),(0,o.compareVersions)(this.getBrowserVersion(),r)===t}},{key:\"isOS\",value:function(e){return this.getOSName(!0)===String(e).toLowerCase()}},{key:\"isPlatform\",value:function(e){return this.getPlatformType(!0)===String(e).toLowerCase()}},{key:\"is\",value:function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}},{key:\"some\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.some(function(t){return e.is(t)})}}]),e}();t.default=p,e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)},70:function(e,t,r){var n,i,s;i=[t,r(69)],void 0===(s=\"function\"==typeof(n=function(t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return i(e,null,[{key:\"getParser\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new n.default(e,t)}},{key:\"parse\",value:function(e){return new n.default(e).getResult()}}]),e}();t.default=s,e.exports=t.default})?n.apply(t,i):n)||(e.exports=s)}})});","import React, { useState, useRef, useLayoutEffect } from 'react'\nimport stopMediaStream from 'stop-media-stream'\nimport Loader from './Loader'\nimport Button from './Button'\nimport dataURLToBlob from 'dataurl-to-blob'\nimport 'webrtc-adapter'\nimport { useTranslate } from './Language'\nimport Link from './Link'\nimport bowser from 'bowser'\nimport { Picture } from '../redux/types'\n\nconst takePicture = (video: HTMLVideoElement) => (): Picture => {\n  const canvas = document.createElement('canvas')\n  canvas.width = video.videoWidth\n  canvas.height = video.videoHeight\n  const ctx = canvas.getContext('2d')\n  if (ctx) {\n    ctx.translate(video.videoWidth, 0)\n    ctx.scale(-1, 1)\n    ctx.drawImage(video, 0, 0)\n\n    const blob = dataURLToBlob(canvas.toDataURL('image/jpeg'))\n\n    return { blob, src: URL.createObjectURL(blob) }\n  } else {\n    throw \"Can't create 2d context\"\n  }\n}\n\nexport default function Video(props: {\n  onUnload: () => void\n  onLoad: (shoot: () => Picture) => void\n}) {\n  const { onUnload, onLoad } = props\n  const [error, setError] = useState(null as any)\n  const [loaded, setLoaded] = useState(false)\n  const streamRef = useRef(null as MediaStream | null)\n  const videoRef = useRef(null as HTMLVideoElement | null)\n  const translate = useTranslate()\n\n  const openCamera = () => {\n    setError(null)\n    if (!navigator.mediaDevices) {\n      setError('No mediaDevices')\n      return\n    }\n    navigator.mediaDevices\n      .getUserMedia({ video: true })\n      .then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = streamRef.current = stream\n        } else {\n          stopMediaStream(stream)\n        }\n      })\n      .catch(error => videoRef.current && setError(error))\n  }\n\n  useLayoutEffect(() => {\n    openCamera()\n    return () => {\n      if (streamRef.current) stopMediaStream(streamRef.current)\n      onUnload()\n    }\n  }, [])\n\n  return (\n    <div className=\"creepy video\">\n      <video\n        playsInline\n        ref={videoRef}\n        autoPlay={true}\n        onCanPlay={() => {\n          if (videoRef.current) {\n            setLoaded(true)\n            onLoad(takePicture(videoRef.current))\n          }\n        }}\n        style={{\n          transform: 'scaleX(-1)',\n          display: loaded ? 'initial' : 'none'\n        }}\n      />\n      {!loaded && !error && <Loader />}\n      {error && (\n        <div className=\"danger\">\n          <small>\n            <p>{translate('Your camera is not available')}.</p>\n            <p>\n              {' '}\n              {translate('Please')}{' '}\n              <Link\n                href={`//www.google.com/search?q=${translate(\n                  'allow access to camera in'\n                )} ${bowser\n                  .getParser(window.navigator.userAgent)\n                  .getBrowserName()}`}\n              >\n                {translate('enable it')}\n              </Link>{' '}\n              {translate('and then')}{' '}\n              <Button type=\"link\" onClick={openCamera}>\n                {translate('try again')}\n              </Button>\n              .\n            </p>\n          </small>\n        </div>\n      )}\n    </div>\n  )\n}\n","import React from 'react'\nimport CreepyFace, { getHostedImages, Images } from './CreepyFace'\nimport CreepyFaceOptions from './CreepyFaceOptions'\nimport getNext, { getAngles } from '../get-next'\nimport tips from '../tips'\nimport { ImageIcon } from './Icon'\nimport Modal from './Modal'\nimport { useShortcuts } from './Shortcuts'\nimport Button from './Button'\nimport { useTranslate } from './Language'\nimport Upload from './Upload'\nimport Video from './Video'\nimport { restartCreation, takePicture, toggleShortcuts } from '../redux/actions'\nimport { useSelector, useDispatch } from './State'\nimport { Pictures } from '../redux/types'\n\nconst defaultCreepyFaceImages = getHostedImages()\n\nconst getSrc = (next: keyof Pictures, images: Images) => {\n  const look = images.looks.find(({ angle }) => angle === next)\n  return look ? look.src : next === 'serious' ? images.src : images.hover\n}\n\nfunction Take({ next }: { next: keyof Pictures }) {\n  const dispatch = useDispatch()\n  const translate = useTranslate()\n\n  return (\n    <>\n      <header>\n        <ImageIcon next={next} /> {translate('Look')}{' '}\n        <strong>{translate(tips[next])}</strong> <ImageIcon next={next} />\n      </header>\n      <div className=\"pictures\">\n        <span className=\"creepy\">\n          <img\n            className=\"example\"\n            alt={translate('Sample face')}\n            src={getSrc(next, defaultCreepyFaceImages)}\n          />\n        </span>\n        <Video\n          onLoad={shoot => dispatch({ type: 'videoReady', payload: shoot })}\n          onUnload={() => dispatch({ type: 'videoNotReady' })}\n        />\n      </div>\n      <Button icon=\"camera\" showShortcut action={takePicture}>\n        {translate('Take picture')}\n      </Button>\n    </>\n  )\n}\n\nfunction Download(props: { pictures: Pictures }) {\n  const { pictures } = props\n  const translate = useTranslate()\n  return (\n    <>\n      <header>\n        <strong>{translate('You are done!')}</strong>{' '}\n        {translate('This is your creepyface')}:\n      </header>\n      <CreepyFace\n        alt={translate('Your creepy face')}\n        images={{\n          src: pictures.serious.src,\n          hover: pictures.hover.src,\n          looks: getAngles().map(angle => ({ angle, src: pictures[angle].src }))\n        }}\n      />\n      <Upload />\n    </>\n  )\n}\n\nexport default function CreepyFaceCreatorModal(props: {\n  isOpen: boolean\n  onOpen: () => void\n  onClose: () => void\n}) {\n  const pictures = useSelector(state => state.pictures)\n  const translate = useTranslate()\n  const shortcuts = useShortcuts()\n  const next = getNext(pictures)\n\n  return (\n    <Modal\n      id=\"creator\"\n      isOpen={props.isOpen}\n      title={translate('Creepyface creator')}\n      onOpen={props.onOpen}\n      onClose={props.onClose}\n    >\n      {next !== undefined ? (\n        <Take next={next} />\n      ) : (\n        <Download pictures={pictures as Pictures} />\n      )}\n      <CreepyFaceOptions next={next} pictures={pictures} />\n      <footer>\n        <small>\n          <Button icon=\"refresh\" type=\"link\" action={restartCreation}>\n            {translate('Start over')}\n          </Button>\n          <Button\n            className=\"shortcuts-toggle\"\n            icon=\"keyboard\"\n            type=\"link\"\n            action={toggleShortcuts}\n          >\n            {translate(shortcuts.show ? 'Hide' : 'Show')}{' '}\n            {translate('keyboard shortcuts')}\n          </Button>\n        </small>\n      </footer>\n    </Modal>\n  )\n}\n"]}